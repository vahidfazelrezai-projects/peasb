{% extends "base.html" %}

{% block body %}
  {% include "navbar.html" %}
{% endblock %}

{% block content %}
  <div class="page-header"><h1>{{ round.name }}</h1></div>
  <br>
  <ol>
    {% for question in round.question_set.all|dictsort:"index" %}
      <center><strong style="text-transform: uppercase;">
          {{ question.question_type }}
      </strong></center> <br>
      <li>
        {{ question.subject }} <i>{{ question.question_format }}</i>
        <div style="display: inline; white-space: pre-wrap;">{{ question.question }}</div> <span style="float: right; font-size: 0.8em;">Written by {{ question.author.first_name }} {{ question.author.last_name }}.</span> <br> <br>
        ANSWER: {{ question.answer }}<br>
      </li>
      <br> <br>
    {% endfor %}
  </ol>
{% endblock %}

{% block footer %}
  <div id="footer">
    <div class="container">
      <button id="tossup" class="btn" style="margin-top: 12px; width: 75px;">
        Toss up
      </button>
      <button id="bonus" class="btn" style="margin-top: 12px; width: 75px;">
        Bonus
      </button>
    </div>
  </div>
  <script> 
    var t_instance = 0, b_instance = 0;
    function t_go(t, inst){
      if(t_instance == inst){
        if(t > 0){
          $( "#tossup" ).text(t);
          $( "#tossup" ).removeClass("btn-danger")
          setTimeout(function(){t_go(t-1, inst)}, 1000);
        } else {
          $( "#tossup" ).text("TIME!");
          $( "#tossup" ).addClass("btn-danger")
          setTimeout(function(){
            if(t_instance == inst){
              $( "#tossup" ).text("Toss up")
              $( "#tossup" ).removeClass("btn-danger")
            }
          }, 2000);
        }
      }
    }
    function b_go(t, inst){
      if(b_instance == inst){
        if(t > 0){
          $( "#bonus" ).text(t);
          setTimeout(function(){b_go(t-1, inst)}, 1000);
          $( "#bonus" ).removeClass("btn-danger")
          if(t <= 5){
            $( "#bonus" ).addClass("btn-warning");
          } else {
            $( "#bonus" ).removeClass("btn-warning")
          }
        } else {
          $( "#bonus" ).text("TIME!");
          $( "#bonus" ).removeClass("btn-warning")
          $( "#bonus" ).addClass("btn-danger")
          setTimeout(function(){
            if(b_instance == inst){
              $( "#bonus" ).text("Bonus")
              $( "#bonus" ).removeClass("btn-danger")
            }
          }, 2000);
        }
      }
    }
    $( "#tossup" ).click(function() {
      t_instance++;
      t_go(5, t_instance);
    });
    $( "#bonus" ).click(function() {
      b_instance++;
      b_go(20, b_instance);
    });
  </script> 
{% endblock %}

